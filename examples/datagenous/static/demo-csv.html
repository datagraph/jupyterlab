<!doctype html>
<html lang="en">
  <head>
    <title>Datagenous Canvas</title>

    <script src="/canvas/build/bundle.js"></script>
        <base href="/">
 <!--<script type="module" src="build/replication/rdf-client.js"></script>-->

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mxgraph@3.9.12/javascript/dist/build.min.js"></script>
<script type="text/javascript" src="/canvas/js/jui-core.js"></script>
<script type="text/javascript" src="/canvas/js/jui-ui.js"></script>
	<!-- Loads and initializes the library -->
	 <script type="text/javascript" src="/canvas/js/mxClient.js"></script>
   <script type="text/javascript" src="/canvas/js/client.js"></script>
   <script type="text/javascript" src="/canvas/js/charter.js"></script>

  <script type="text/javascript" src="/canvas/js/drawer.js"></script>
  <script type="text/javascript" src="/canvas/js/window-manager.js"></script>
  <script type="text/javascript" src="/canvas/js/chartjs.min.js"></script>


<!-- Basic style components -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jui@2.0.3/dist/ui.min.css" >
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jui@2.0.3/dist/ui-jennifer.min.css" >


  </head>
  <body class="jui">

   <script type="text/javascript">


     /* UI */


  $( document ).ready(function() {


      //prepare_mxgraph();
      visualize();
      initialize_canvas();
  });
// To deal with jquery is not being attached
function wait_jquery_and_init() {
      if (window.jQuery) {
          initialize_canvas();
      } else {
          setTimeout(function() { wait_jquery_and_init() }, 50);
      }
  }
function initialize_canvas()
{
 // Calls phosphor widgets first using json
 // Then edges and nodes
 // windows variable manages the serialization of UX elements
 var windows =
  {

    "widgets": [
      {
        "id": "stop",
        "type": "input/csv",
        "left": 250,
        "top": 250,
        "width" : 250,
        "height":250,
        "elements": []
      }
    ],
    "edges":[],
    "nodes":[]
  }
 console.log(windows)
  var widgets = windows.widgets;
  for (w in widgets)
  {
    this.window.create_widget(widgets[w].id, widgets[w].type);
  }
}
  // $('body').change(visualize);

  function visualize()
  {
    $('.window').each(function() {
         juizer(this.id );
      });
  }
  function juizer(widget_id)
  {
    jui.ready([ "ui.window" ], function(win) {

    /* Data read */
    win_0 = win(("#" + widget_id), {
        width: 250,
        height: 200,
        left: 250,
        top: 200,
        resize: true,
        move: true
      }).show();
      draw_vertexes(widget_id);
      });

    }
window.onload = initialize_canvas();


  </script>


  </body>
</html>
